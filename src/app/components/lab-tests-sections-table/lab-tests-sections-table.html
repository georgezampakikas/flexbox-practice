<form nz-form (ngSubmit)="onSubmit()">
  <div class="lab-sections-wrapper">
    <div class="lab-sections-container">
      @for (group of labTestsByCategory; track group;) {
        <div class="lab-section">
          <h2 class="custom-header-3">{{ group.category }}</h2>

          <nz-form-item>
            <nz-form-control>
              <nz-checkbox-group class="flexbox" [(ngModel)]="selectedValues" name="selectedValues">
                @for (test of group.tests; track test.id) {
                  <label nz-checkbox [nzValue]="test">{{ test.name }}</label>
                }
              </nz-checkbox-group>
            </nz-form-control>
          </nz-form-item>
        </div>
      }
    </div>

    <nz-divider nzType="vertical" class="vertical-divider"></nz-divider>

    <div class="right-content">
      <div class="custom-header-3">Εξετάσεις που έχουν προστεθεί</div>
        @for(value of selectedValues; track value) {
            <div class="tests-container">
              <div>{{ value.name }}</div> 
              <nz-icon 
                class="icon" 
                nzType="minus-circle" 
                nzTheme="outline"
                (click)="deleteSelectedValue(value.id)" 
              />
            </div>
            <nz-divider></nz-divider>
        }

    </div>
  </div>

  <nz-divider></nz-divider>

  <div class="footer-btns">
    <button class="button" nz-button nzType="default" type="button" (click)="closeDrawer()">Ακύρωση</button>
    <button class="button" nz-button nzType="primary" type="submit">Καταχώρηση</button>
  </div>
</form>
